FROM eclipse-temurin:17-jre-alpine

ARG APP_NAME
ARG JWT_SECRET
ARG POSTGRES_HOST
ARG POSTGRES_PASSWD

ENV JWT_SECRET ${JWT_SECRET}
ENV POSTGRES_HOST ${POSTGRES_HOST}
ENV NOTES_DATABASE notes_d
ENV POSTGRES_USER postgres
ENV POSTGRES_PASSWD ${POSTGRES_PASSWD}

WORKDIR /app
COPY ${APP_NAME}.jar /app/app.jar

EXPOSE 8080

ENTRYPOINT ["java", "-jar", "app.jar" ]